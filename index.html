<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Card√°pio ‚Ä¢ Loja SP</title>
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>

  <!-- Topo -->
  <header class="topbar">
    <div class="brand">
      <div class="logo" id="logo">SP</div>
      <div class="brandText">
        <h1 id="storeName">Sushi ‚Ä¢ Unidade SP</h1>
        <p id="storeLine">Pedido m√≠nimo R$ 20,00 ‚Ä¢ 30-50 min ‚Ä¢ Gr√°tis</p>
      </div>
    </div>

    <div class="topActions">
      <a class="pill" id="instagram" href="#" target="_blank" rel="noreferrer">Instagram</a>
      <button class="btn" id="btnPromo">Ver promo√ß√µes</button>
    </div>
  </header>

  <main class="wrap">
    <!-- Hero -->
    <section class="card hero">
      <div class="heroHead">
        <div>
          <h2 id="headline">Fa√ßa seu pedido!</h2>
          <p class="muted" id="subtitle">Sushi caprichado ‚Ä¢ entrega r√°pida ‚Ä¢ qualidade de sempre</p>

          <div class="meta">
            <span class="badge" id="openBadge">
              <span class="dot"></span>
              <b id="openText">Fecharemos em 20 minutos. Fa√ßa seu pedido r√°pido!</b>
              <span id="openUntil"></span>
            </span>
            <span class="badge"><b id="rating">4,8</b> <span>(<span id="reviewsCount">1.007</span> avalia√ß√µes)</span></span>
            <span class="badge"><b id="distance">2,3km</b> <span>de voc√™</span></span>
            <span class="badge"><b id="location">S√£o Paulo</b> <span>‚Ä¢ Entrega gr√°tis</span></span>
          </div>
        </div>

        <div class="searchBox">
          <input id="search" type="search" placeholder="Buscar produto‚Ä¶ (ex: temaki, barca, hot)" />
          <div class="chips" id="chips"></div>
        </div>
      </div>

      <!-- Promo + contador -->
      <div class="promoBar">
        <div class="promoText">
          <h3 id="promoTitle">Compre 1 leve 2 ‚Ä¢ Super Combo</h3>
          <p id="promoDesc">Aproveite a promo√ß√£o por tempo limitado.</p>
        </div>

        <div class="count" aria-label="contador da promo√ß√£o">
          <div class="countCol">
            <div class="n" id="mLeft">45</div>
            <div class="lbl">min</div>
          </div>
          <div class="sep">:</div>
          <div class="countCol">
            <div class="n" id="sLeft">00</div>
            <div class="lbl">seg</div>
          </div>
        </div>
      </div>
    </section>

    <div class="grid">
      <!-- Coluna esquerda -->
      <section class="card">
        <div class="section" id="secPromo">
          <div class="h">
            <h3>Promo√ß√µes</h3>
            <span class="small" id="promoHint">√∫ltimas unidades com pre√ßo especial</span>
          </div>
          <div class="products" id="promoList"></div>
        </div>

        <div class="divider"></div>

        <div class="section">
          <div class="h">
            <h3>Card√°pio</h3>
            <span class="small">selecione um item e finalize</span>
          </div>
          <div class="products" id="menuList"></div>

          <p class="note">
            *Escolha o item e personalize na pr√≥xima etapa.
          </p>
        </div>
      </section>

      <!-- Coluna direita -->
      <aside class="card">
        <div class="section">
          <div class="h">
            <h3>Avalia√ß√µes</h3>
            <span class="small">√∫ltimos 90 dias</span>
          </div>
          <div class="reviews" id="reviews"></div>
        </div>

        <div class="divider"></div>

        <div class="section">
          <div class="h">
            <h3>Informa√ß√µes</h3>
            <span class="small">entrega & pagamento</span>
          </div>

          <div class="info">
            <div class="row"><span>Tipos de entrega</span><b id="deliveryTypes">Motoboy ‚Ä¢ Retirada</b></div>
            <div class="row"><span>Formas de pagamento</span><b id="payments">Pix ‚Ä¢ Cart√£o</b></div>
            <div class="row"><span>Endere√ßo</span><b id="address">Rua Exemplo, 123</b></div>
            <div class="row"><span>√Åreas de entrega</span><b id="areas">Centro ‚Ä¢ Zona Sul</b></div>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <div class="modal" id="selectionModal" hidden>
    <div class="modalCard">
      <div class="modalHead">
        <div>
          <h3 id="modalTitle">Selecionar item</h3>
          <p class="small muted" id="modalDesc"></p>
        </div>
        <button class="ghostBtn" type="button" id="closeModal">Fechar</button>
      </div>
      <div class="modalBody">
        <div class="stack">
          <label class="small">Bebida</label>
          <select id="modalDrink"></select>
        </div>
        <div class="stack" id="barcaOptions" hidden>
          <div class="pillList" id="barcaList"></div>
        </div>
      </div>
      <div class="modalActions">
        <button class="ghostBtn" type="button" id="cancelModal">Cancelar</button>
        <button class="btn2" type="button" id="confirmSelection">Finalizar pedido</button>
      </div>
    </div>
  </div>

  <!-- ================= POP-UP LOCALIZA√á√ÉO ================= -->
  <div id="popupLocalizacao" style="
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.6);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  ">
    <div style="
      background: #fff;
      width: 90%;
      max-width: 360px;
      border-radius: 20px;
      padding: 20px;
      text-align: center;
    ">
      <h2 style="margin-bottom: 10px;">Encontramos uma loja perto de voc√™</h2>

      <p id="popupTexto" style="color:#555;font-size:14px;margin-bottom:20px;">
        Verificando sua localiza√ß√£o‚Ä¶
      </p>

      <button onclick="fecharPopup()" style="
        width:100%;
        padding:14px;
        border-radius:100px;
        border:none;
        background:#000;
        color:#fff;
        font-size:15px;
        cursor:pointer;
      ">
        Continuar
      </button>
    </div>
  </div>

  <script src="./js/data.js"></script>
  <script src="./js/app.js"></script>

  <script>
    function fecharPopup(){
      document.getElementById("popupLocalizacao").style.display = "none";
      localStorage.setItem("popupLocalizacaoVisto", "1");
    }

    window.addEventListener("load", () => {
      if(localStorage.getItem("popupLocalizacaoVisto")) return;

      document.getElementById("popupLocalizacao").style.display = "flex";
      const texto = document.getElementById("popupTexto");

      if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(
          () => {
            texto.innerHTML = `
              Temos uma unidade a <b>2,3 km</b> de voc√™.<br>
              Entrega r√°pida e gr√°tis üöÄ
            `;
          },
          () => {
            texto.innerHTML = `
              Temos uma unidade a <b>2,3 km</b> de voc√™.<br>
              Entrega r√°pida e gr√°tis üöÄ
            `;
          }
        );
      } else {
        texto.innerHTML = `
          Temos uma unidade a <b>2,3 km</b> de voc√™.<br>
          Entrega r√°pida e gr√°tis üöÄ
        `;
      }
    });
  </script>

</body>
</html>